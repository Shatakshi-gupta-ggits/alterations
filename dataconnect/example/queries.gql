mutation CreateUser @auth(level: USER) {
  user_insert(data: {
    id_expr: "uuidV4()",
    address: "123 Main St",
    displayName: "New User",
    phoneNumber: "555-1234",
    createdAt_expr: "request.time"
  })
}

query ListServices @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  services {
    id
    name
    description
    basePrice
  }
}

mutation UpdateOrder($id: UUID!, $status: String!) @auth(level: USER) {
  order_update(key: {id: $id}, data: {status: $status, updatedAt_expr: "request.time"})
}

query GetUserOrders @auth(level: USER) {
  orders(where: {userId: {eq_expr: "auth.uid"}}) {
    id
    pickupAddress
    deliveryAddress
    status
    totalPrice
  }
}